<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Facture d'Abonnement</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #1e293b;
            margin-bottom: 10px;
        }
        p {
            color: #64748b;
            margin-bottom: 30px;
        }
        button {
            background: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.6);
        }
        button:active {
            transform: translateY(0);
        }
        .info {
            background: #f1f5f9;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            border-left: 4px solid #3b82f6;
        }
        .info h3 {
            margin-top: 0;
            color: #1e293b;
        }
        .info ul {
            margin: 0;
            padding-left: 20px;
            color: #475569;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üßæ Test de Facture d'Abonnement</h1>
        <p>Cliquez sur le bouton ci-dessous pour g√©n√©rer une facture d'abonnement de test avec le nouveau design moderne.</p>

        <button onclick="generateTestInvoice()">
            üì• G√©n√©rer la facture de test
        </button>

        <div class="info">
            <h3>üìã Informations de test</h3>
            <ul>
                <li><strong>Num√©ro:</strong> ABO-2025-TEST-001</li>
                <li><strong>Montant HT:</strong> 49.99 ‚Ç¨</li>
                <li><strong>TVA:</strong> 20%</li>
                <li><strong>Montant TTC:</strong> 59.99 ‚Ç¨</li>
                <li><strong>P√©riode:</strong> 14/11/2025 - 14/12/2025</li>
            </ul>
        </div>
    </div>

    <script>
        function generateTestInvoice() {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF();
            const pageWidth = pdf.internal.pageSize.getWidth();
            const pageHeight = pdf.internal.pageSize.getHeight();
            const margin = 20;
            let yPos = 20;

            // Header background
            pdf.setFillColor(249, 250, 251);
            pdf.rect(0, 0, pageWidth, 50, 'F');

            // Logo area with accent color
            pdf.setFillColor(59, 130, 246);
            pdf.roundedRect(margin, yPos, 8, 8, 2, 2, 'F');

            // Company name next to logo
            pdf.setFontSize(16);
            pdf.setFont('helvetica', 'bold');
            pdf.setTextColor(15, 23, 42);
            pdf.text('DentalCloud SAS', margin + 12, yPos + 6);

            // Invoice title and number aligned to right
            pdf.setFontSize(10);
            pdf.setFont('helvetica', 'normal');
            pdf.setTextColor(100, 116, 139);
            pdf.text('FACTURE D\'ABONNEMENT', pageWidth - margin, yPos + 2, { align: 'right' });

            pdf.setFontSize(14);
            pdf.setFont('helvetica', 'bold');
            pdf.setTextColor(59, 130, 246);
            pdf.text('ABO-2025-TEST-001', pageWidth - margin, yPos + 9, { align: 'right' });

            yPos = 60;

            // Invoice details card
            pdf.setFillColor(255, 255, 255);
            pdf.setDrawColor(229, 231, 235);
            pdf.roundedRect(margin, yPos, pageWidth - 2 * margin, 25, 3, 3, 'FD');

            yPos += 8;

            // Date
            pdf.setFontSize(9);
            pdf.setFont('helvetica', 'normal');
            pdf.setTextColor(107, 114, 128);
            pdf.text('Date d\'√©mission', margin + 5, yPos);
            pdf.setFont('helvetica', 'bold');
            pdf.setTextColor(31, 41, 55);
            pdf.text('14 novembre 2025', margin + 5, yPos + 5);

            // Period
            pdf.setFont('helvetica', 'normal');
            pdf.setTextColor(107, 114, 128);
            pdf.text('P√©riode de facturation', pageWidth / 2, yPos);
            pdf.setFont('helvetica', 'bold');
            pdf.setTextColor(31, 41, 55);
            pdf.text('14/11/2025 - 14/12/2025', pageWidth / 2, yPos + 5);

            yPos = 95;

            // Left column - Company
            pdf.setFontSize(8);
            pdf.setFont('helvetica', 'bold');
            pdf.setTextColor(107, 114, 128);
            pdf.text('DE', margin, yPos);
            yPos += 5;

            pdf.setFontSize(10);
            pdf.setFont('helvetica', 'bold');
            pdf.setTextColor(15, 23, 42);
            pdf.text('DentalCloud SAS', margin, yPos);
            yPos += 5;

            pdf.setFontSize(9);
            pdf.setFont('helvetica', 'normal');
            pdf.setTextColor(71, 85, 105);

            const emitterLines = [
                '123 Avenue des Champs-√âlys√©es',
                '75008 Paris',
                'France',
                '',
                'T√©l. +33 1 23 45 67 89',
                'contact@dentalcloud.fr',
                '',
                'RCS Paris 123 456 789',
                'SIRET 123 456 789 00012',
                'N¬∞ TVA FR12345678901'
            ];

            emitterLines.forEach(line => {
                if (line === '') {
                    yPos += 3;
                } else {
                    pdf.text(line, margin, yPos);
                    yPos += 4;
                }
            });

            // Right column - Customer
            yPos = 95;
            const rightColX = pageWidth / 2 + 5;

            pdf.setFontSize(8);
            pdf.setFont('helvetica', 'bold');
            pdf.setTextColor(107, 114, 128);
            pdf.text('√Ä', rightColX, yPos);
            yPos += 5;

            pdf.setFillColor(249, 250, 251);
            pdf.roundedRect(rightColX - 3, yPos - 3, (pageWidth / 2) - margin - 2, 35, 2, 2, 'F');

            pdf.setFontSize(10);
            pdf.setFont('helvetica', 'bold');
            pdf.setTextColor(15, 23, 42);
            pdf.text('Laboratoire Dentaire Test', rightColX, yPos);
            yPos += 5;

            pdf.setFontSize(9);
            pdf.setFont('helvetica', 'normal');
            pdf.setTextColor(71, 85, 105);

            const clientLines = [
                '45 Rue de la R√©publique',
                '',
                'lab.test@example.fr',
                '+33 1 98 76 54 32',
                '',
                'RCS Lyon 987 654 321'
            ];

            clientLines.forEach(line => {
                if (line === '') {
                    yPos += 3;
                } else {
                    pdf.text(line, rightColX, yPos);
                    yPos += 4;
                }
            });

            yPos = 165;

            // Services section
            pdf.setFontSize(10);
            pdf.setFont('helvetica', 'bold');
            pdf.setTextColor(15, 23, 42);
            pdf.text('D√©tails de l\'abonnement', margin, yPos);
            yPos += 8;

            // Table header
            pdf.setFillColor(249, 250, 251);
            pdf.roundedRect(margin, yPos - 2, pageWidth - 2 * margin, 8, 1, 1, 'F');

            pdf.setFontSize(8);
            pdf.setFont('helvetica', 'bold');
            pdf.setTextColor(107, 114, 128);
            pdf.text('DESCRIPTION', margin + 3, yPos + 3);
            pdf.text('MONTANT HT', pageWidth - margin - 5, yPos + 3, { align: 'right' });
            yPos += 12;

            // Service line
            pdf.setFontSize(9);
            pdf.setFont('helvetica', 'normal');
            pdf.setTextColor(31, 41, 55);
            pdf.text('Abonnement mensuel DentalCloud', margin + 3, yPos);
            pdf.setFont('helvetica', 'bold');
            pdf.text('49.99 ‚Ç¨', pageWidth - margin - 5, yPos, { align: 'right' });
            yPos += 5;

            pdf.setFontSize(8);
            pdf.setFont('helvetica', 'normal');
            pdf.setTextColor(107, 114, 128);
            pdf.text('P√©riode du 14/11/2025 au 14/12/2025', margin + 3, yPos);
            yPos += 15;

            // Totals section
            const totalsX = pageWidth - margin - 70;

            // Subtotal
            pdf.setFontSize(9);
            pdf.setFont('helvetica', 'normal');
            pdf.setTextColor(71, 85, 105);
            pdf.text('Sous-total HT', totalsX, yPos);
            pdf.setFont('helvetica', 'bold');
            pdf.text('49.99 ‚Ç¨', pageWidth - margin - 5, yPos, { align: 'right' });
            yPos += 6;

            // VAT
            pdf.setFont('helvetica', 'normal');
            pdf.text('TVA (20%)', totalsX, yPos);
            pdf.setFont('helvetica', 'bold');
            pdf.text('10.00 ‚Ç¨', pageWidth - margin - 5, yPos, { align: 'right' });
            yPos += 10;

            // Total with background
            pdf.setFillColor(59, 130, 246);
            pdf.roundedRect(totalsX - 5, yPos - 5, 75, 12, 2, 2, 'F');

            pdf.setFontSize(11);
            pdf.setFont('helvetica', 'bold');
            pdf.setTextColor(255, 255, 255);
            pdf.text('TOTAL TTC', totalsX, yPos + 2);
            pdf.text('59.99 ‚Ç¨', pageWidth - margin - 5, yPos + 2, { align: 'right' });
            yPos += 20;

            // Payment info section
            pdf.setFillColor(249, 250, 251);
            pdf.roundedRect(margin, yPos, pageWidth - 2 * margin, 20, 2, 2, 'F');

            yPos += 6;
            pdf.setFontSize(8);
            pdf.setFont('helvetica', 'bold');
            pdf.setTextColor(107, 114, 128);
            pdf.text('COORDONN√âES BANCAIRES', margin + 5, yPos);
            yPos += 5;

            pdf.setFontSize(9);
            pdf.setFont('helvetica', 'normal');
            pdf.setTextColor(31, 41, 55);
            pdf.text('IBAN: FR76 1234 5678 9012 3456 7890 123', margin + 5, yPos);
            yPos += 4;
            pdf.text('BIC: TESTFRPP', margin + 5, yPos);

            // Footer
            pdf.setDrawColor(229, 231, 235);
            pdf.line(margin, pageHeight - 20, pageWidth - margin, pageHeight - 20);

            pdf.setFontSize(8);
            pdf.setTextColor(156, 163, 175);
            pdf.setFont('helvetica', 'normal');
            pdf.text(
                'Document g√©n√©r√© automatiquement - Aucune signature requise',
                pageWidth / 2,
                pageHeight - 12,
                { align: 'center' }
            );
            pdf.text(
                'DentalCloud SAS - contact@dentalcloud.fr',
                pageWidth / 2,
                pageHeight - 8,
                { align: 'center' }
            );

            pdf.save('Facture_Abonnement_TEST.pdf');

            alert('‚úÖ Facture g√©n√©r√©e avec succ√®s! Le PDF a √©t√© t√©l√©charg√©.');
        }
    </script>
</body>
</html>
